import configparser

import networkx as nx
import osmnx as ox

config = configparser.ConfigParser()
config.sections()
config.read('conf.ini')

graphml_file_path = config['osm']['graphml_file_path']

G = ox.load_graphml(graphml_file_path)
D = ox.utils_graph.get_digraph(G, weight="travel_time")

cpath = [(111481288, 1277601207), (1277601207, 111481288), (111481288, 2080756633), (2080756633, 4199180593),
         (4199180593, 2207418932), (2207418932, 2262128243), (2262128243, 3392710660), (3392710660, 2262128243),
         (2262128243, 2207418932), (2207418932, 4199180593), (4199180593, 4199223989), (4199223989, 111481561),
         (111481561, 2356350474), (2356350474, 129559334), (129559334, 3387597070), (3387597070, 3688773918),
         (3688773918, 137868887), (137868887, 3092601790), (3092601790, 4925459193), (4925459193, 138230335),
         (138230335, 5051610943), (5051610943, 1548165654), (1548165654, 138231433), (138231433, 138234198),
         (138234198, 138231423), (138231423, 4558796673), (4558796673, 137882131), (137882131, 2222393786),
         (2222393786, 137884299), (137884299, 2307219747), (2307219747, 2307219738), (2307219738, 2307219723),
         (2307219723, 137896691), (137896691, 138238303), (138238303, 138238299), (138238299, 138238298),
         (138238298, 1788785577), (1788785577, 137964116), (137964116, 3950967587), (3950967587, 4751729050),
         (4751729050, 1788785773), (1788785773, 2053568214), (2053568214, 4464130475), (4464130475, 5305837235),
         (5305837235, 4751728950), (4751728950, 4751728939), (4751728939, 7844352884), (7844352884, 427277909),
         (427277909, 7844352886), (7844352886, 138194473), (138194473, 4751728983), (4751728983, 126638962),
         (126638962, 4751729025), (4751729025, 4751728994), (4751728994, 299614078), (299614078, 4751729015),
         (4751729015, 138196470), (138196470, 299613573), (299613573, 299613373), (299613373, 4751729004),
         (4751729004, 4751729011), (4751729011, 299613131), (299613131, 1352663667), (1352663667, 1352663630),
         (1352663630, 1352647011), (1352647011, 1352647002), (1352647002, 1352646999), (1352646999, 1594780111)]

head = cpath[0][0]
tail = list(map(lambda x: x[1], cpath))
path = [head] + tail

shortest_path = nx.shortest_path(D, path[0], path[-1], weight='length')
fastest_path = nx.shortest_path(D, path[0], path[-1], weight='travel_time')

ox.plot.plot_graph_routes(G, [path, shortest_path, fastest_path], route_colors=['red', 'blue', 'green'])
